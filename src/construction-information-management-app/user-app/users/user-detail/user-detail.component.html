<div class="detailWrapper" *ngIf="projects">
    <mat-card class="editUser" *ngIf="currentUser.isAdmin()">
        <h3> {{ user.getFullName() }} </h3>
        <div class="profilePicture">
            <label for="file">
                <div mat-card-avatar *ngIf="imageSrc" class="avatar" [style.backgroundImage]="imageSrc" ></div>
                <div class="overlay">
                    <div class="text"> Wijzigen </div>
                </div>
            </label>
        </div>
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <mat-card-content class="content">
                <div mat-dialog-content class="formFields">
                    <mat-form-field>
                        <input matInput placeholder="Voornaam" formControlName="firstName" required>
                    </mat-form-field>
                    <mat-form-field>
                        <input matInput placeholder="Tussenvoegsel" formControlName="insertion">
                    </mat-form-field>
                    <mat-form-field>
                        <input matInput placeholder="Achternaam" formControlName="lastName" required>
                    </mat-form-field>
                    <div *ngIf="userForm.get('email').invalid && (userForm.get('email').dirty || userForm.get('email').touched)" class="alert alert-danger">
                        <div *ngIf="userForm.get('email').errors.email">
                            De e-mailadres heeft een ongeldig formaat
                        </div>
                        <div *ngIf="userForm.get('email').errors.duplicate">
                            De email bestaat al
                        </div>
                    </div>
                    <mat-form-field>
                        <input type="email" matInput placeholder="Email" formControlName="email" required>
                    </mat-form-field>
                    <div *ngIf="userForm.get('phoneNumber').invalid && (userForm.get('phoneNumber').dirty || userForm.get('phoneNumber').touched)" class="alert alert-danger">
                        <div *ngIf="userForm.get('phoneNumber').errors.duplicate">
                            De telefoon nummer bestaat al
                        </div>
                    </div>
                    <mat-form-field>
                        <input type="text" matInput placeholder="Telefoon nummer" formControlName="phoneNumber" required>
                    </mat-form-field>
                    <mat-form-field>
                        <input type="text" matInput placeholder="Functie" formControlName="function" required>
                    </mat-form-field>
                    <input [hidden]="true" id="file" multiple type="file" (change)="onImageUpload($event)">
                </div>
                <div class="projectsWrapper" *ngIf="projects">
                    <h3> Projecten </h3>
                    <div class="projectContent" *ngFor="let project of projects">
                        <label> Project: </label>
                        <span> {{ project.getName() }} </span>
                        <div class="divider"></div>
                    </div>
                </div>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button (click)="onCloseDetailView($event)">Annuleren</button>
                <button mat-raised-button type="submit">Opslaan</button>
            </mat-card-actions>
        </form>
    </mat-card>

    <mat-card class="userDetailView" *ngIf="!currentUser.isAdmin()">
        <mat-card-header>
            <div mat-card-avatar class="avatar" [style.backgroundImage]="imageSrc"></div>
            <mat-card-title> {{ user.getFullName() }} </mat-card-title>
            <mat-card-subtitle> {{ user.function }} </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <div class="userInfo">
                <div class="title">
                    <label> Naam: </label>
                    <span>{{ user.firstName }}</span>
                    <span *ngIf="user.insertion"> {{ user.insertion }}</span>
                    <span> {{ user.lastName }}</span>
                </div>
                <div class="title">
                    <label> Email: </label> <a href="mailto:{{ user.email }}">{{ user.email }}</a>
                </div>
                <div class="title">
                    <label> Telefoon nummer: </label> <a href="tel:{{ user.phoneNumber }}">{{ user.phoneNumber }}</a>
                </div>
                <div class="title">
                    <label> Functie: </label> <span>{{ user.function }}</span>
                </div>
            </div>
            <div class="linkedProject">
                <h3> Projecten </h3>
                <div class="projectContent" *ngFor="let project of projects">
                    <label> Project naam: </label>
                    <span> {{ project.getName() }} </span>
                    <div class="divider"></div>
                </div>
            </div>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button (click)="onCloseDetailView($event)">Terug</button>
        </mat-card-actions>
    </mat-card>
</div>
